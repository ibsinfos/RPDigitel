$('.mirror').on('keyup', function () {			    $('.' + $(this).attr('class')).val($(this).val());			    var length = this.value.length;			    $("#charcount").html(length);			    if (length > 160) {						        $("#msgcount").html('2 Messages');							}			    if (length > 320) {						        $("#msgcount").html('3 Messages');							}							});$(document).ready(function () {			    $('#getshorturl').on('click', function (e) {						        e.preventDefault();						        if ($("#longurl").val() == '') {									            alert("Please enter url.");									            return false;											}						        var url = base_url + "getshorturl"; // the script where you handle the form input.						        // alert(url);						        //alert(formData);						        $.ajax({									            type: "POST",									            url: url,									            data: 'longurl=' + $("#longurl").val(),									            dataType: 'json',									            success: function (data)									            {												                /* if (data.error !== '') {																				alert(data.error);																				return false;																			}*/																//                                                                    $("#msgbody").append(data.shorturl.id);												                $('#msgbody').val($('#msgbody').val() + data.shorturl.id);																															}											});															});			});$(document).ready(function () {		    $('#btnnewtemplate').on('click', function (e) {		        e.preventDefault();				// alert('sd');		/*			var url = base_url + "newtemplate";						$.ajax({			            type: "POST",            url: url,            data: 'template_name=' + $("#template_name").val() + '&template_body=' + $("#msgbody").val(),            dataType: 'json',            success: function (data)            {			if(data.status == 0){						$(".submit_status").html('<div class="alert alert-danger"><button type="button" class="close" data-dismiss="alert">X</button><strong>' + data.msg + '</strong></div>');						$("html, body").animate({			scrollTop: 0			}, 600);						return false;			}						alert(data.msg);						location.reload();			            }						});		*/	});	});$(document).ready(function () {			    $('#btndeletetemplate').on('click', function (e) {						        e.preventDefault();				        var temval = $("#templates option:selected").val();						        var delid = temval.split('@');						        if (delid[0] === '' || $("#templates").val() === '') {									            var delete_msg="Please select template to delete.";						$(".submit_status").html('<div class="alert alert-danger"><button type="button" class="close" data-dismiss="alert">X</button><strong>' + delete_msg + '</strong></div>');						$("html, body").animate({								scrollTop: 0							}, 600);						$("#charcount").html("0");						$("#send-text-msg")[0].reset();									            return false;											}						if(confirm('Are you sure?')){		        var url = base_url + "frontend/emailcampaign/deleteEmailTemplate";		        $.ajax({						            type: "POST",			            url: url,			            data: 'template_id=' + delid[0],						            dataType: 'json',			            success: function (data)			            {										if (data.status == 1) {										$(".submit_status").html('<div class="alert alert-success"><button type="button" class="close" data-dismiss="alert">X</button><strong>' + data.msg + '</strong></div>');										$("html, body").animate({												scrollTop: 0											}, 600);										}					                // alert(data.msg);				                location.reload();											}					});			}			});			});$(document).ready(function () {			    $('#btndupdatetemplate').on('click', function (e) {						        e.preventDefault();						        var temval = $("#templates option:selected").val();						        var delid = temval.split('@');						        if (delid[0] === '' || $("#templates").val() === '') {									            alert("Please select template to update.");									            return false;											}						        var url = base_url + "updateemplate";						        $.ajax({									            type: "POST",									            url: url,									            data: '&template_body=' + $("#msgbody").val() + '&template_id=' + delid[0],									            dataType: 'json',									            success: function (data)									            {												                alert(data.msg);												                location.reload();															}											});							});			});$(document).ready(function () {			    $('#btnpreviewtemplate').on('click', function (e) {				        e.preventDefault();		/*						var temval = $("#templates option:selected").val();						var previd = temval.split('@');									if (previd[0] === '' || $("#templates").val() === '') {									            var delete_msg="Please select template to Preview";						$(".submit_status").html('<div class="alert alert-danger"><button type="button" class="close" data-dismiss="alert">X</button><strong>' + delete_msg + '</strong></div>');						$("html, body").animate({						scrollTop: 0						}, 600);						$("#charcount").html("0");						$("#send-text-msg")[0].reset();									            return false;												}		*/							});					/* Send test mail (from Preview modal) Start */		$('.previewtemplate').keypress(function(e){		if(e.which == 13){//Enter key pressed			$('#send_test_mail').click();//Trigger search button click event		}	});			$("#send_test_mail").click(function () {										var url = base_url + "frontend/emailcampaign/send_test_mail";				// var template_data = $("#preview_template_div").HTML;				template_data = document.getElementById("preview_template_div");		// alert(template_data);		// var template_data = CKEDITOR.instances.preview_editor1.getData();				// var sub=document.getElementById('preview_template_title').value;		// var title=document.getElementById('preview_template_subject').value;		        $.ajax({            type: "POST",            url: url,            // data: 'template_title=' + $("#preview_template_title").val() + '&template_subject=' + $("#preview_template_subject").val() + '&email_id=' + $("#email_id").val() + '&template_data='+template_data.innerHTML,            data: 'template_title=' + $("#preview_template_title").val() + '&template_subject=' + $("#preview_template_subject").val() + '&email_id=' + $("#email_id").val() + '&template_id='+$("#template_id").val(),            dataType: 'json',			            success: function (data)			{				window.location = base_url + "frontend/emailcampaign/index";								// alert(data);							}		});	});		/* Send test mail (from Preview modal) End */				/* Save new email template Start */			$('.newtemplate').keypress(function(e){		if(e.which == 13){//Enter key pressed			$('#save_template').click();//Trigger search button click event		}	});			$("#save_template").click(function () {				var url = base_url + "frontend/emailcampaign/save_email_template";										// var form_data =  new FormData($("#frm_new_email_template")[0]);				var template_data = CKEDITOR.instances.editor1.getData();				var sub=document.getElementById('template_title').value;		var title=document.getElementById('template_subject').value;		// alert(sub);		// form_data.append('template_data', template_data);				// alert (JSON.stringify(form_data));				// alert(template_data);        $.ajax({			            type: "POST",			            url: url,			            // data: form_data,            // data: 'template_data='+template_data,			            data: 'template_title=' + $("#template_title").val() + '&template_subject=' + $("#template_subject").val() + '&template_data='+template_data,						            dataType: 'json',			            success: function (data)			{				window.location = base_url + "frontend/emailcampaign/index";								//                alert(data);			    // location.reload();							}					});			});		/* Save new email template end */	});$(document).ready(function () {		    $('#email_submitfrm').on('click', function (e) {        e.preventDefault();				var url = base_url + "frontend/emailcampaign/send_email";				var template_id =$("#template_id").val();						var send_mail_data=$("#send_email").serialize();				var data=send_mail_data+'&template_title=' + $("#preview_template_title").val() + '&template_subject=' + $("#preview_template_subject").val() + '&to_additional_email=' + $("#to_additional_email").val() + '&template_id='+template_id;				// alert(send_mail_data);				$.ajax({						type: "POST",						url: url,						data: data,						dataType: 'json',						success: function (data)						{								if (data.status == 0) {										$(".submit_status").html('<div class="alert alert-danger"><button type="button" class="close" data-dismiss="alert">X</button><strong>' + data.msg + '</strong></div>');										$("html, body").animate({												scrollTop: 0											}, 600);										}else if(data.status == 2){					alert(data.msg);					window.location.href=base_url +'login';					} else {										$(".submit_status").html('<div class="alert alert-success"><button type="button" class="close" data-dismiss="alert">X</button><strong>' + data.msg + '</strong></div>');										$("html, body").animate({												scrollTop: 0											}, 600);										$("#charcount").html("0");										$("#send-text-msg")[0].reset();									}											}					});			});			});$(document).ready(function () {			    $('#submit_appt').on('click', function (e) {								e.preventDefault();								var url = base_url + "saveAppointment";								//alert(url);								$.ajax({												type: "POST",												url: url,												data: $("#appointment_frm").serialize(),												dataType: 'json',												success: function (data)												{																if (data.status == 0) {																				$(".submit_status").html('<div class="alert alert-danger"><button type="button" class="close" data-dismiss="alert">X</button><strong>' + data.msg + '</strong></div>');																				$("html, body").animate({																								scrollTop: 0																							}, 600);																				}else if(data.status == 2){					alert(data.msg);					window.location.href=base_url +'login';					}else {																				$(".submit_status").html('<div class="alert alert-success"><button type="button" class="close" data-dismiss="alert">X</button><strong>' + data.msg + '</strong></div>');																																								$("html, body").animate({																								scrollTop: 0																							}, 600);																				$("#appointment_frm").closest('form').find("input[type=text], textarea,checkbox,radio").val("");																				//                    $("#appointment_frm").trigger('reset');																				$('input:checkbox').removeAttr('checked');																			}																															}											});															});			});$(document).ready(function () {			    $('#edit_submitfrm').on('click', function (e) {								e.preventDefault();								var url = base_url + "edit_sendtextsms";								$.ajax({												type: "POST",												url: url,												data: $("#send-text-msg").serialize(),												dataType: 'json',												success: function (data)												{																if (data.status == 0) {																				$(".submit_status").html('<div class="alert alert-danger"><button type="button" class="close" data-dismiss="alert">X</button><strong>' + data.msg + '</strong></div>');																				$("html, body").animate({																								scrollTop: 0																							}, 600);																				}else if(data.status == 2){					alert(data.msg);					window.location.href=base_url +'login';					}  else {																				$(".submit_status").html('<div class="alert alert-success"><button type="button" class="close" data-dismiss="alert">X</button><strong>' + data.msg + '</strong></div>');																																								$("html, body").animate({																								scrollTop: 0																							}, 600);																				$("#send-text-msg")[0].reset();																			}																															}											});															});			});function changeTempContent(val) {			    var content = val.split('@');		    // $("#emailbody").val(content[1]);		// CKEDITOR.instances['preview_editor1'].setData(content[1]);		var template_id=content[0];		$("#template_id").val(content[0]);	$("#preview_template_title").val(content[1]);	$("#preview_template_subject").val(content[2]);			$(".mirror").val(content[1]);	    // $("#charcount").html($(".mirror").val().length);		// alert(template_id);		var url = base_url + "frontend/emailcampaign/get_email_template";			$.ajax({				type: "POST",				url: url,				data: "template_id="+template_id,				dataType: 'json',				success: function (data)				{												// CKEDITOR.instances['preview_editor1'].setData(data.msg);						// CKEDITOR.instances['preview_editor1'].setData(data.msg);						// $("#preview_template_div").val(data.msg);						var div = document.getElementById('preview_template_div');						div.innerHTML=data.msg;					}			});								}$(function () {			    $("#schedule_sms_date").datetimepicker({minDate: '-0D',								changeMonth: true,								changeYear: true,								timeFormat: 'hh:mm tt',								showSecond: false,								ampm: true,								yearRange: '2017:2050'							});			    $("#endon").datepicker({minDate: '-70Y',								changeMonth: true,								changeYear: true,								yearRange: '1920:2017'							});			});$(function () {			    $('#recurring').click(function () {								$('#recurring_option').toggle(this.checked);							});			})$(function () {			    $('#schedule').click(function () {																$('#scedule_option').toggle(this.checked);							});			})$(function () {			    $('#ongoing').click(function () {								if (this.checked) {												$('#endon').attr('disabled', true);												$('#endon').val("");												} else {												$('#endon').attr('disabled', false);											}															});			})	